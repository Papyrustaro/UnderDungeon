# 戦闘の流れ

①if(行動が一周した): 素早さ順にソート。次の行動者をindex0に  
②PassiveEffectの再計算(Hp/Sp/Elementの条件を判断するため)  
②次に行動するのが味方か敵か判断(死んでいれば④に飛ぶ)  
③キャラクターの行動  
(1)敵の場合:予め決められたAIに沿って行動  
(2)味方の場合:プレイヤーの選択によって、通常攻撃、スキル、アイテム、防御  
④行動キャラクターのActiveバフなどのターン経過反映  
⑤行動が終わったら、終わったフラグ。index++し①に戻る  

# 実装(Update内の流れ)

```cs
private void Update(){
  if("行動が終わった"){
    //全味方のpassiveEffect再計算
    if("行動が一周した"){
      //charaListをSpdでソート
      //nextIndex = 0;
    }
    if("次の行動が敵である"){
      //敵の行動決定&処理
    }else{
      //味方の行動決定&処理
    }
  }
}
```

# 実装(敵の行動決定&処理)

敵の行動AIを呼び、適切な対象をランダムで選ぶ  

## 必要となるパラメータ
・行動する敵キャラのAI(保持スキルID)  
・対象は全キャラ可能性あり→全キャラのBattleCharacter  

# 実装(味方の行動決定&処理)

プレイヤーの対象と行動の入力を待つ→その通りに実行  

## 必要となるパラメータ
・行動するプレイヤーの保持スキルID  
・スキルターン  
・所持アイテム  
・全キャラのBattleCharacter  
・
